unit UOrdemServicoDetalhes;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, uniGUITypes, uniGUIAbstractClasses,
  uniGUIClasses, uniGUIForm, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS, FireDAC.Phys.Intf,
  FireDAC.DApt.Intf, FireDAC.Stan.Async, FireDAC.DApt, Data.DB,
  FireDAC.Comp.DataSet, FireDAC.Comp.Client, uniRadioGroup, uniDBRadioGroup,
  uniMemo, uniDBMemo, uniDateTimePicker, uniDBDateTimePicker, uniEdit,
  uniDBEdit, uniLabel, uniGroupBox, uniPanel, uniPageControl, uniGUIBaseClasses;

type
  TFOrdemServicoDetalhes = class(TUniForm)
    pgMenu: TUniPageControl;
    tsItens: TUniTabSheet;
    UniGroupBox1: TUniGroupBox;
    UniLabel10: TUniLabel;
    UniLabel9: TUniLabel;
    edtCod: TUniDBEdit;
    edtDesc: TUniDBEdit;
    UniLabel1: TUniLabel;
    dtImplant: TUniDBDateTimePicker;
    UniLabel6: TUniLabel;
    mmObs: TUniDBMemo;
    rgTipoPreco: TUniDBRadioGroup;
    UniDBRadioGroup1: TUniDBRadioGroup;
    fdOrdServDetalhe: TFDQuery;
    dsOrdServDetalhe: TDataSource;
    fdOrdServDetalhecodEmpresa: TIntegerField;
    fdOrdServDetalhecodEstabel: TIntegerField;
    fdOrdServDetalhecodOrdemServico: TIntegerField;
    fdOrdServDetalhedescricao: TStringField;
    fdOrdServDetalheobservacao: TStringField;
    fdOrdServDetalhetipoOrdem: TIntegerField;
    fdOrdServDetalhedataImplantacao: TDateField;
    fdOrdServDetalhevalorTotal: TBCDField;
    fdOrdServDetalhesituacao: TIntegerField;
    fdOrdServDetalhedataConclusao: TDateField;
    fdOrdServDetalhecodOperador: TIntegerField;
    fdOrdServDetalhecodEmitente: TIntegerField;
    fdOrdServDetalhecodLocal: TStringField;
    fdOrdServDetalhecodFormaPagto: TIntegerField;
    fdOrdServDetalhecodCondPagto: TIntegerField;
    fdOrdServDetalhetipoPreco: TIntegerField;
    fdOrdServDetalhecodTabPreco: TIntegerField;
    fdOrdServDetalhecodMaqEquip: TIntegerField;
    fdOrdServDetalhemotivoCancelamento: TStringField;
    fdOrdServDetalhedataCancelamento: TDateField;
    fdOrdServDetalhemsgAlerta: TStringField;
    fdOrdServDetalhecodUsuarConclusao: TIntegerField;
    fdOrdServDetalhecodUsuarImplant: TStringField;
    fdOrdServDetalhecodUsuarCancelamento: TStringField;
    fdOrdServDetalhecodNomeEmit: TStringField;
    fdOrdServDetalhecodNomeOperador: TStringField;
    fdOrdServDetalhecodNomeFormaPag: TStringField;
    fdOrdServDetalhecodNomeCondPag: TStringField;
    fdOrdServDetalhecodNomeTabPre: TStringField;
    fdOrdServDetalhecodNomeMaqEquip: TStringField;
    fdOrdServDetalhenomeCidade: TStringField;
    UniDBFormattedNumberEdit1: TUniDBFormattedNumberEdit;
    UniLabel2: TUniLabel;
  private
    { Private declarations }
  public
    { Public declarations }
    iCodOS : integer;
    procedure pAtualizaOS;

  end;

function FOrdemServicoDetalhes: TFOrdemServicoDetalhes;

implementation

{$R *.dfm}

uses
  MainModule, uniGUIApplication, Main;

function FOrdemServicoDetalhes: TFOrdemServicoDetalhes;
begin
  Result := TFOrdemServicoDetalhes(UniMainModule.GetFormInstance(TFOrdemServicoDetalhes));
end;

{ TFOrdemServicoDetalhes }

procedure TFOrdemServicoDetalhes.pAtualizaOS;
begin

  fdOrdServDetalhe.Close;
  fdOrdServDetalhe.Params[0].AsInteger := MainForm.iCodEmpresa;
  fdOrdServDetalhe.Params[1].AsInteger := MainForm.iCodEstabel;
  fdOrdServDetalhe.Params[2].AsInteger := iCodOS;
  fdOrdServDetalhe.Active := True;



end;

end.
